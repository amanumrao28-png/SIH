<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rural E-Complaint Portal</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
  body {
    background-image: url('rural-background.jpg'); /* Replace with your rural background image file */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    position: relative;
    min-height: 100vh;
  }
  /* Optional overlay for better contrast */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(0,0,0,0.35);
    z-index: -1;
  }
  .sidebar {
    height: 100%;
    width: 0; /* Start hidden */
    position: fixed;
    top: 0;
    left: 0;
    background-color: #111;
    overflow-x: hidden;
    transition: 0.5s; /* Smooth transition */
    padding-top: 60px;
  }

  .sidebar a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    color: white;
    display: block;
    transition: 0.3s;
  }

  .sidebar a:hover {
    background-color: #575757;
  }

  .closebtn {
    position: absolute;
    top: 20px;
    right: 25px;
    font-size: 36px;
  }
  #main {
    transition: margin-left .5s;
    padding: 16px;
    margin-left: 0;
    font-size: 20px; /* Increased font size for visibility */
    cursor: pointer;
    color: rgb(61, 9, 9);
    background-color: rgb(255, 255, 255);
    border-radius: 8px;
    width: fit-content;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-top: 10px;
    margin-left: 10px;
  }
  
  
</style>

</head>

<body class="bg-blue-50 min-h-screen text-gray-800">
  <!-- Header with logo and language -->
   <img src="https://www.freepik.com/free-photo/rural-village-landscape_1234567.html
" alt="Rural village view">
<!-- <div class="sidebar">
  <a href="#">üè† Home</a>
  <a href="#">‚òéÔ∏è Contact Us</a>
  <a href="#">‚ùì Help & Support</a>
</div> -->
<div id="mySidebar" class="sidebar">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">√ó</a>
  <a href="#">üè† Home</a>
  <a href="#">‚òéÔ∏è Contact Us</a>
  <a href="#">‚ùì Help & Support</a>
</div>

<!-- <div id="main">
  <button onclick="openNav()">‚ò∞ Open Sidebar</button>
</div> -->
  <header class="bg-green-700 text-white p-6 flex justify-between items-center">
    <div class="flex items-center gap-3">
      
      <h1 style="margin-left: 575px;" class="text-2xl md:text-3xl font-extrabold tracking-wide">Rural E-Complaint Portal</h1>
    </div>
    <select id="language" class="rounded p-2 text-black">
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
    </select>
    
  </header>
  <div id="main">
  <button onclick="openNav()">‚ò∞</button>
</div><!-- Landing Screen with CTA buttons -->
  <main class="container mx-auto py-10 px-2">
    <div id="welcomeScreen">
      <div class="bg-white rounded-lg shadow-md p-8 text-center max-w-2xl mx-auto">
        <h2 class="text-2xl md:text-3xl font-bold mb-2">Welcome! ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§π‡•á‡§§‡•Å ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h2>
        <p class="mb-8 text-lg">Register complaints related to electricity, water, transport, and more‚Äîwith transparent tracking and updates.</p>
        <div class="flex flex-col md:flex-row gap-4 justify-center items-center">
          <button onclick="showSection('formSection')" class="bg-green-600 hover:bg-green-800 text-white px-6 py-3 rounded-lg font-semibold text-lg transition">Lodge a Complaint</button>
          <button onclick="showSection('statusSection')" class="bg-blue-600 hover:bg-blue-800 text-white px-6 py-3 rounded-lg font-semibold text-lg transition">Track Complaint Status</button>
          <button onclick="showSection('infoSection')" class="bg-gray-600 hover:bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold text-lg transition">General Information</button>
          <button onclick="showSection('adminSection')" class="bg-yellow-600 hover:bg-yellow-800 text-white px-6 py-3 rounded-lg font-semibold text-lg transition">Admin Dashboard</button>
        </div>
      </div>
    </div>

    <!-- Complaint Submission Form -->
    <div id="formSection" class="hidden">
      <form id="complaintForm" class="bg-white rounded-xl shadow max-w-lg mx-auto p-8 mt-8">
        <h2 class="text-xl font-bold mb-4">Lodge a Complaint</h2>
        <div class="space-y-4">
          <input type="text" id="name" placeholder="Name" class="w-full border rounded px-3 py-2" required>
          <input type="tel" id="mobile" placeholder="Mobile Number" class="w-full border rounded px-3 py-2" required pattern="\d{10,}">
          <input type="text" id="village" placeholder="Village/Town" class="w-full border rounded px-3 py-2" required>
          <input type="text" id="district" placeholder="District" class="w-full border rounded px-3 py-2" required>
          <select id="category" class="w-full border rounded px-3 py-2" required>
            <option value="">Select Category</option>
            <option>Electricity</option>
            <option>Water</option>
            <option>Transportation</option>
            <option>Others</option>
          </select>
          <textarea id="description" placeholder="Describe the problem..." class="w-full border rounded px-3 py-2" required rows="3"></textarea>
          <input type="file" accept=".jpg,.png,.pdf" class="w-full border rounded px-3 py-2" id="attach">
          <label class="flex items-center"><input type="checkbox" id="anonymous" class="mr-2"> Submit anonymously</label>
          <button type="submit" class="w-full bg-green-600 hover:bg-green-800 text-white font-bold rounded-lg px-4 py-2 mt-2">Submit Complaint</button>
          <p id="formResult" class="text-green-700 font-bold text-center mt-2"></p>
        </div>
      </form>
      <div class="text-center mt-6">
        <button onclick="showSection('welcomeScreen')" class="text-blue-700 underline">Back to Home</button>
      </div>
    </div>

    <!-- Status Tracking -->
    <div id="statusSection" class="hidden">
      <div class="bg-white rounded-xl shadow max-w-md mx-auto p-8 mt-8">
        <h2 class="text-xl font-bold mb-4">Track Your Complaint</h2>
        <input type="text" id="trackInput" placeholder="Enter Complaint ID or Mobile" class="w-full border rounded px-3 py-2 mb-2">
        <button id="trackBtn" class="w-full bg-blue-600 hover:bg-blue-800 text-white font-bold rounded-lg px-4 py-2">Track Status</button>
        <div id="statusResult" class="mt-4 text-lg"></div>
        <button id="remindBtn" class="bg-yellow-500 text-white px-4 py-2 mt-3 rounded font-semibold hidden">Send Reminder</button>
        <div class="text-center mt-6">
          <button onclick="showSection('welcomeScreen')" class="text-blue-700 underline">Back to Home</button>
        </div>
      </div>
    </div>

    <!-- General Information Section -->
    <div id="infoSection" class="hidden">
      <div class="bg-white rounded-xl shadow max-w-lg mx-auto p-8 mt-8">
        <h2 class="text-xl font-bold mb-4">General Information</h2>
        <ul class="list-disc list-inside text-base mb-4">
          <li>This portal is for rural residents to lodge problems related to electricity, water, transportation, and other civic issues.</li>
          <li>Complaints are reviewed by respective authorities and updated regularly.</li>
          <li>You can track your complaint status using Complaint ID or mobile number.</li>
          <li>For urgent issues, contact your local Panchayat office or helpline directly.</li>
        </ul>
        <div class="text-center mt-6">
          <button onclick="showSection('welcomeScreen')" class="text-blue-700 underline">Back to Home</button>
        </div>
      </div>
    </div>

    <!-- Admin Dashboard Section -->
    <div id="adminSection" class="hidden">
      <div class="bg-white rounded-xl shadow max-w-4xl mx-auto p-8 mt-8">
        <h2 class="text-2xl font-bold mb-5">Admin Dashboard</h2>
        <div class="overflow-auto">
          <table class="min-w-full table-auto bg-white border">
            <thead>
              <tr class="bg-gray-100">
                <th class="px-3 py-2 border">Complaint ID</th>
                <th class="px-3 py-2 border">Name/Village</th>
                <th class="px-3 py-2 border">Category</th>
                <th class="px-3 py-2 border">Status</th>
                <th class="px-3 py-2 border">Action</th>
              </tr>
            </thead>
            <tbody id="adminTable">
              <!-- Populated by JS -->
            </tbody>
          </table>
        </div>
        <div class="text-center mt-8">
          <button onclick="showSection('welcomeScreen')" class="text-blue-700 underline">Back to Home</button>
        </div>
      </div>
    </div>
  </main>

  <!-- JavaScript for navigation and form logic -->
  <script>
    // Section navigation
    function openNav() {
  document.getElementById("mySidebar").style.width = "250px";
}

function closeNav() {
  document.getElementById("mySidebar").style.width = "0";
}
    function showSection(id) {
      // Hide all
      ["welcomeScreen", "formSection", "statusSection", "infoSection", "adminSection"].forEach(section => {
        document.getElementById(section).classList.add("hidden");
      });
      // Show selected
      document.getElementById(id).classList.remove("hidden");
    }

    // Complaint Form Handling
    let complaints = []; // For demo; store complaints in array

    document.getElementById('complaintForm').onsubmit = function(e) {
      e.preventDefault();
      let anon = document.getElementById('anonymous').checked;
      let name = anon ? "Anonymous" : document.getElementById('name').value.trim();
      let mobile = anon ? "N/A" : document.getElementById('mobile').value.trim();
      let village = document.getElementById('village').value.trim();
      let district = document.getElementById('district').value.trim();
      let category = document.getElementById('category').value;
      let description = document.getElementById('description').value.trim();
      let attach = document.getElementById('attach').files[0];
      let err = "";

      if (!anon && (!name || !mobile.match(/^\d{10,}$/))) err += "Name and valid mobile are required. ";
      if (!village) err += "Village/Town required. ";
      if (!district) err += "District required. ";
      if (!category) err += "Select category. ";
      if (!description) err += "Description required. ";
      if (attach && attach.size > 5 * 1024 * 1024) err += "Attachment max size 5 MB. ";

      let result = document.getElementById('formResult');
      if (err) {
        result.textContent = err;
        result.classList.remove("text-green-700");
        result.classList.add("text-red-700");
      } else {
        let cid = "R-" + (Math.floor(Math.random()*1e6));
        complaints.push({
          id: cid,
          name, mobile, village, district, category, description,
          status: "Received"
        });
        result.textContent = `Complaint Submitted! Your complaint ID is: ${cid}`;
        result.classList.remove("text-red-700");
        result.classList.add("text-green-700");
        this.reset();
        setTimeout(()=>{ result.textContent = ""; }, 7000);
      }
    };

    // Status Tracking
    document.getElementById('trackBtn').onclick = function() {
      let input = document.getElementById('trackInput').value.trim().toLowerCase();
      let found = complaints.find(c => c.id.toLowerCase() === input || c.mobile === input);
      let res = document.getElementById('statusResult');
      let remind = document.getElementById('remindBtn');
      if (found) {
        res.textContent = `Complaint (${found.id}) for ${found.category}: Status is "${found.status}".`;
        if (found.status !== "Solved") {
          remind.classList.remove('hidden');
          remind.onclick = function() {
            alert("Reminder sent to authority for complaint " + found.id);
          }
        } else {
          remind.classList.add('hidden');
        }
      } else {
        res.textContent = "Complaint not found. Please check your ID or mobile.";
        remind.classList.add('hidden');
      }
    };

    // Admin Dashboard
    function renderAdminTable() {
      let table = document.getElementById('adminTable');
      table.innerHTML = complaints.length ? "" : "<tr><td colspan='5' class='text-center py-4 text-gray-500'>No complaints yet</td></tr>";
      complaints.forEach(c => {
        table.innerHTML += `<tr>
          <td class="border px-2 py-1">${c.id}</td>
          <td class="border px-2 py-1">${c.name}<br/><span class="text-sm text-gray-500">${c.village}</span></td>
          <td class="border px-2 py-1">${c.category}</td>
          <td class="border px-2 py-1"><span class="${c.status==='Solved'?'bg-green-300':'bg-yellow-200'} px-2 py-1 rounded">${c.status}</span></td>
          <td class="border px-2 py-1">
            <button onclick="updateStatus('${c.id}','Solved')" class="bg-green-600 text-white px-3 py-1 rounded mb-1">Mark Solved</button>
            <button onclick="updateStatus('${c.id}','Under Review')" class="bg-blue-600 text-white px-3 py-1 rounded">Under Review</button>
          </td>
        </tr>`;
      });
    }

    function updateStatus(id, status) {
      let c = complaints.find(c=>c.id===id);
      if (c) c.status = status;
      renderAdminTable();
    }

    document.querySelector('button[onclick="showSection(\'adminSection\')"]').addEventListener('click', renderAdminTable);

    // Accessibility: auto-toggle required fields for anonymnous
    document.getElementById('anonymous').onchange = function() {
      let req = !this.checked;
      document.getElementById('name').required = req;
      document.getElementById('mobile').required = req;
    };
  </script>
</body>
</html>